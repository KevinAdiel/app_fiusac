<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Notas app_fiusac</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/simple-sidebar.css" rel="stylesheet">

<link href="css/datepicker3.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
<link href="css/bootstrap-table.css" rel="stylesheet">


<!--Icons-->
<script src="js/lumino.glyphs.js"></script>
<script src="js/general.js"></script>
<script src="sqlite/cursosaprobados.js"></script>

<!--[if lt IE 9]>
<script src="js/html5shiv.js"></script>
<script src="js/respond.min.js"></script>
<![endif]-->

</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button id="boton" type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#sidebar-collapse">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<img src="FACING.png" height="50" width="50"> <a
					class="navbar-brand" href="#"><span>FIUSAC</span>APP</a>
				<ul class="user-menu">
					<li class="dropdown pull-right"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"><svg
								class="glyph stroked male-user">
								<use xlink:href="#stroked-male-user"></use>
						</svg> User <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="datos.html"><svg
										class="glyph stroked male-user">
										<use xlink:href="#stroked-male-user"></use></svg> Perfil</a></li>
							<li><a href="#"><svg class="glyph stroked gear">
										<use xlink:href="#stroked-gear"></use></svg> Settings</a></li>
							<li><a href="index.html"><svg
										class="glyph stroked cancel">
										<use xlink:href="#stroked-cancel"></use></svg> Cerrar Sesión</a></li>
						</ul></li>
				</ul>
			</div>

		</div>
		<!-- /.container-fluid -->
	</nav>

	<div id="wrapper">

		<!-- Sidebar -->
		<div id="sidebar-wrapper">
			<ul class="sidebar-nav">
				<li class="sidebar-brand"><a href="#"> Menú </a></li>
				<li class="active"><a href="" onclick="enviarInfo('datos')">Datos
						Personales</a></li>
				<li><a href="" onclick="enviarInfo('notascursos')">Notas de
						Cursos</a></li>
				<li><a href="" onclick="enviarInfo('cursosaprobados')">Listado
						de Cursos</a></li>
				<li><a href="">Cursos Asignados</a></li>
				<li><a href="" onclick="enviarInfo('repitencia')">Repitencia</a></li>
				<li><a href="" onclick="enviarInfo('inscripcion')">Inscripción</a></li>
				<li><a href="" onclick="enviarInfo('resolucionesjd')">Resoluciones
						JD</a></li>
				<li><a href="" onclick="enviarInfo('desasignacion')">Desasignaciones</a></li>

			</ul>
		</div>
		<!-- /#sidebar-wrapper -->
	</div>

	<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
		<div class="row">
			<ol class="breadcrumb">
				<li><a href="#"><svg class="glyph stroked home">
							<use xlink:href="#stroked-home"></use></svg></a></li>
				<li class="active">Notas</li>
			</ol>
		</div>
		<!--/.row-->

		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">Cursos Aprobados</h1>
			</div>
		</div>
		<!--/.row-->

		<div id="content"></div>

		<div class="row">
			<div class="col-lg-12">

				<div class="panel panel-default">
					<div class="panel-heading">Listado</div>
					<div class="panel-body">
						<div class="panel panel-blue">
							<div class="panel-body tabs">
								<ul class="nav nav-tabs">
									<li class="active"><a href="#tab1" data-toggle="tab">Datos
											Personales</a></li>
									<li><a href="#tab2" data-toggle="tab">Datos Acádemicos</a></li>
								</ul>

								<div class="tab-content">
									<div class="tab-pane fade in active" id="tab1">
										<h4>Datos Personales</h4>
										<p id="id"></p>
										<p id="carrera"></p>
									</div>
									<div class="tab-pane fade" id="tab2">
										<h4>Datos Acádemicos</h4>
										<p id="aprobado"></p>
										<p id="problema"></p>
										<p id="creditos"></p>
										<p id="promedio"></p>
									</div>
								</div>
							</div>
						</div>
						<!--/.panel-->
						<table id="table-listado" data-toggle="table" id="tablacurso"
							data-row-style="rowStyle" data-show-refresh="true"
							data-show-toggle="true" data-show-columns="true"
							data-search="true" data-select-item-name="toolbar1"
							data-pagination="true" data-sort-name="name"
							data-sort-order="desc"></table>
						<div id="vacio"></div>

						<script>
							$(function() {
								$('#hover, #striped, #condensed')
										.click(
												function() {
													var classes = 'table';

													if ($('#hover').prop(
															'checked')) {
														classes += ' table-hover';
													}
													if ($('#condensed').prop(
															'checked')) {
														classes += ' table-condensed';
													}
													$('#tablacurso')
															.bootstrapTable(
																	'destroy')
															.bootstrapTable(
																	{
																		classes : classes,
																		striped : $(
																				'#striped')
																				.prop(
																						'checked')
																	});
												});
							});

							function rowStyle(row, index) {
								var classes = [ 'active', 'success', 'info',
										'warning', 'danger' ];
								if (row.Nota > 70) {
									//if (index % 2 === 0 && index / 2 < classes.length) {
									return {
										classes : classes[index / 2]
									};
								}
								return {};
							}
						</script>
					</div>
				</div>
			</div>
			<!-- /.col-->
		</div>
		<!-- /.row -->

	</div>
	<!--/.main-->

	<script src="js/jquery-1.11.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/chart.min.js"></script>
	<script src="js/chart-data.js"></script>
	<script src="js/easypiechart.js"></script>
	<script src="js/easypiechart-data.js"></script>
	<script src="js/bootstrap-datepicker.js"></script>
	<script src="js/bootstrap-table.js"></script>

	<script>
		var bandera = 0;

		$(window).on("orientationchange", function() {
			if (bandera == 1) {
				$("#wrapper").toggleClass("toggled");
				bandera = 0;
			}
		});

		$("#boton").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
			if (bandera == 0) {
				bandera = 1;
			}
		});
		!function($) {
			$(document)
					.on(
							"click",
							"ul.nav li.parent > a > span.icon",
							function() {
								$(this).find('em:first').toggleClass(
										"glyphicon-minus");
							});
			$(".sidebar span.icon").find('em:first').addClass("glyphicon-plus");
		}(window.jQuery);

		$(window).on('resize', function() {
			if ($(window).width() > 768)
				$('#sidebar-collapse').collapse('show')
		})
		$(window).on('resize', function() {
			if ($(window).width() <= 767)
				$('#sidebar-collapse').collapse('hide')
		})

		var cursos = [];

		$('#table-listado').bootstrapTable({
			columns : [ {
				field : 'no',
				title : 'No.'
			}, {
				field : 'codigo',
				title : 'Código'
			}, {
				field : 'curso',
				title : 'Curso'
			}, {
				field : 'creditos',
				title : 'Créditos'
			}, {
				field : 'fecha',
				title : 'Fecha Aprobación'
			}, {
				field : 'nota',
				title : 'Nota'
			}, {
				field : 'observaciones',
				title : 'Observaciones'
			} ],
			data : cursos
		});

		$(document).ready(function() {
			cargarVariables();
			cargarCursos();
			onBodyLoad();
			onBodyLoad2();
		});
		function cargarCursos() {
			var param = carnet + ',' + carrera + ',201020724,1,1';
			$('#content').html(
					'<div align="center"><img src="ajax-loader.gif"/></div>');
			$
					.ajax({
						type : "GET",
						url : "https://www.ingenieria.usac.edu.gt/app_fiusac/llamadasAjax.php",
						dataType : "json",
						data : {
							peticion : 1,
							operacion : 'ListadoCursosAprobados',
							parametros : param
						},
						success : function(data) {
							vaciarTablaDatosListado();
							vaciarTablaCursos();
							agregarInfo("id", "NOMBRE: " + data.Carnet + " - "
									+ data.Nombre);
							agregarInfo("carrera", "CARRERA: "
									+ data.CodigoCarrera + " - "
									+ data.NombreCarrera);
							agregarInfo("aprobado", "CURSOS APROBADOS: "
									+ data.CursosAprobados);
							agregarInfo("problema", "CURSOS PROBLEMA: "
									+ data.CursosProblema);
							agregarInfo("creditos", "CREDITOS: "
									+ data.Creditos);
							agregarInfo("promedio", "PROMEDIO: "
									+ data.Promedio);

							AddValueToDB(data.Carnet, data.Nombre,
									data.CodigoCarrera, data.NombreCarrera,
									data.CursosAprobados, data.CursosProblema,
									data.Creditos, data.Promedio);

							tam = data.ListaCursosAprobados.length;
							if (tam == 0) {
								$('#vacio')
										.html(
												'<div align="center"><h5>No tiene cursos aprobados<h5></div>');
							} else {
								$('#vacio').html('');
							}
							for (i = 0; i < tam; i++) {
								agregarCurso(
										data.ListaCursosAprobados[i].Numero,
										data.ListaCursosAprobados[i].CodigoCurso,
										data.ListaCursosAprobados[i].NombreCurso,
										data.ListaCursosAprobados[i].Creditos,
										data.ListaCursosAprobados[i].FechaAprobacion,
										data.ListaCursosAprobados[i].Nota,
										data.ListaCursosAprobados[i].FormaAprobacionListado);
								AddValueToDB2(
										data.ListaCursosAprobados[i].Numero,
										data.ListaCursosAprobados[i].CodigoCurso,
										data.ListaCursosAprobados[i].NombreCurso,
										data.ListaCursosAprobados[i].Creditos,
										data.ListaCursosAprobados[i].FechaAprobacion,
										data.ListaCursosAprobados[i].Nota,
										data.ListaCursosAprobados[i].FormaAprobacionListado);
							}
							$('#content').html('');
						},
						error : function(error) {
							$('#content')
									.html(
											'<div align="center"><h4>Sin Conexión<h2></div>');
							ListDBValues();
							ListDBValues2();
						}
					});
		}

		function agregarInfo(tipoDato, text) {
			document.getElementById(tipoDato).innerHTML = text;
		}
		function agregarCurso(no, codigo, nombre, creditos, fecha, nota,
				observacion) {
			var mydata = {
				"no" : no,
				"codigo" : codigo,
				"curso" : nombre,
				"creditos" : creditos,
				"fecha" : fecha,
				"nota" : nota,
				"observaciones" : observacion
			};
			cursos.push(mydata);
			$('#table-listado').bootstrapTable("load", cursos);
		}
	</script>
</body>

</html>
